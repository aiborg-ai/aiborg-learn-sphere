# Run lint-staged for incremental linting and formatting
npx lint-staged

# Run type checking
echo "ğŸ“ Type checking..."
npx tsc --noEmit

# Check for console.log statements (except in logger.ts, test files, and comments)
echo "ğŸ” Checking for console.log statements..."
# Note: This check excludes JSDoc comments (lines with ' * ' or ' */') and logger.ts
if grep -r "console\.\(log\|error\|warn\|info\)" --include="*.ts" --include="*.tsx" --exclude="logger.ts" --exclude="*.test.ts" --exclude="*.test.tsx" --exclude-dir="__tests__" --exclude-dir="node_modules" --exclude-dir="dist" --exclude-dir="build" src/ | grep -v " \* " | grep -v " \*/" | grep -v "^[^:]*\.md:"; then
  echo "âŒ Error: console.log statements found in production code"
  echo "Please use the logger utility instead: import { logger } from '@/utils/logger'"
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
